<apex:page standardController="Thread__c"
    extensions="CRM_ThreadPdfController"
    applyBodyTag="false"
    standardStylesheets="false"
    renderAs="PDF"
>
    <apex:stylesheet value="{!$Resource.Journal_PDF_Style}" />

    <div class="document">
        <div class="header">
            <!-- HEADER CONTENT-->
            <apex:image url="{!URLFOR($Resource.stoLogos,
                'navLogo.png')}"
            />
        </div>

        <div class="content">
            <h2>Journalf√∏rt henvendelse</h2>

            <span> <strong>Navn: </strong>{!thread__c.CRM_Account__r.Name} <br /> </span>
            <span> <strong>Org nr: </strong>{!thread__c.CRM_Account__r.INT_OrganizationNumber__c} <br /> </span>
            <span>
                <b>Mottatt/Sendt: </b>
                <apex:outputText value=" {!Thread__c.CRM_Date_Time_Registered__c}"> </apex:outputText>
                <br />
            </span>
            <span> <b>Type: </b>Arbeidsgiver Dialog - Tiltak Avtale <br /> </span>
            <br />

            <span style="font-weight: 400; font-size: 16pt">Innhold:</span>
            <div style="margin-top: 0.25em">
                <apex:repeat value="{!threadMessages}" var="message">
                    <apex:outputPanel rendered="{!message.type == 'Message' || message.type == 'Info'}">
                        <div style="padding-bottom: 0.75em">
                            <b>
                                <apex:outputPanel rendered="{!message.externalMessage == true}">
                                    {!message.fromName}
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!message.externalMessage == false}">
                                    NAV {!message.fromIdent}
                                </apex:outputPanel>
                                -
                                <apex:outputText value=" {!message.sentDate}"> </apex:outputText>
                            </b>
                            <p style="margin-top: 0.5em; white-space: pre-wrap">
                                <!-- ToDo: Use HTMLENCODE when escape=false: <apex:outputText escape="false" value="{!HTMLENCODE(message.messageText)}"></apex:outputText> -->
                                <apex:outputText escape="false" value="{!message.messageText}"></apex:outputText>
                            </p>
                        </div>
                    </apex:outputPanel>
                </apex:repeat>
            </div>
        </div>

        <div class="footer">
            <!-- FOOTER CONTENT -->
            <div>Side <span class="pagenumber" /> av <span class="pagecount" /></div>
        </div>
    </div>
</apex:page>